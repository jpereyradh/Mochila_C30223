(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[27],{1008:function(t,e,i){"use strict";var s=i(42),a=i(981),r=i(2),o={mixins:[i(353).a],data:()=>({url:"",inputPlaceholder:Object(r.b)("E.g. %{example}",{example:"https://drive.google.com/mydocument"})}),computed:{validUrl(){if(Object(s.f)(this.url))return this.url;if(Object(s.f)("http://"+this.url))return"http://"+this.url;const t=Object(a.a)(this.url);return t||null}},mounted(){this.$refs.input.focus()},methods:{cancel(){this.$emit("close")},save(){this.validUrl&&this.$emit("select",this.validUrl)}}},n=(i(1015),i(3)),l=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal is-wide",on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel.apply(null,arguments)}}},[e("div",{staticClass:"modal-container is-animated scale-up"},[e("header",{staticClass:"modal-header"},[t._v(t._s(t.__("Enter URL")))]),t._v(" "),e("div",{staticClass:"modal-body"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],ref:"input",class:{invalid:t.url&&!t.validUrl},attrs:{type:"url",placeholder:t.inputPlaceholder,autofocus:"",novalidate:""},domProps:{value:t.url},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save.apply(null,arguments)},input:function(e){e.target.composing||(t.url=e.target.value)}}}),t._v(" "),e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.url,expression:"!url"}],staticClass:"small-type muted-type"},[t._v("\n          "+t._s(t.__("We support all kinds of URLs \u2014 images, YouTube, Google Drive, Soundcloud, articles, blogs, you name it."))+"\n        ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.url&&!t.validUrl,expression:"url && !validUrl"}],staticClass:"small-type error-type"},[t._v(t._s(t.__("Please enter a valid link.")))])])]),t._v(" "),e("footer",{staticClass:"modal-footer"},[e("button",{staticClass:"text-button",on:{click:t.cancel}},[t._v(t._s(t.__("Cancel")))]),t._v(" "),e("button",{staticClass:"text-button",attrs:{disabled:!t.validUrl},on:{click:t.save}},[t._v(t._s(t.__("Save")))])])])])}),[],!1,null,"1e2e6044",null);e.a=l.exports},1012:function(t,e,i){"use strict";i(992)},1015:function(t,e,i){"use strict";i(995)},1018:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i(1019);const a=new Audio(i.n(s).a)},1019:function(t,e,i){t.exports=i.p+"media/audio/shutter-4770b3cf1bfa4a9d845ad36f7b36e9f2.mp3"},1036:function(t,e,i){"use strict";var s=i(83),a=i(1065),r={components:{OzLoadingSpinner:s.a},mixins:[a.a],props:{title:String,download:{type:Boolean,default:!1}},computed:{finalTitle(){return this.title?this.title:this.__("Uploading %{filename}",{filename:this.filename||this.__("file")})}}},o=(i(1084),i(3)),n=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tv"},[t.error?[e("div",{staticClass:"tv-cell"},[e("p",{staticClass:"title-type"},[t._v(t._s(t.error))])]),t._v(" "),e("div",{staticClass:"tv-cell button-list"},[t.canRetryUpload?e("button",{staticClass:"text-button",on:{click:t.startUpload}},[t._v(t._s(t.__("Retry")))]):t._e(),t._v(" "),t.download?e("a",{staticClass:"text-button",attrs:{role:"button",href:t.fileUrl,download:""}},[t._v(t._s(t.__("Download")))]):t._e(),t._v(" "),e("button",{staticClass:"text-button",on:{click:t.cancelUpload}},[t._v(t._s(t.__("Cancel")))])])]:[e("div",{staticClass:"tv-cell"},[e("OzLoadingSpinner")],1),t._v(" "),e("div",{staticClass:"tv-cell"},[e("p",{staticClass:"title-type ellipsified-type"},[t._v(t._s(t.finalTitle))]),t._v(" "),e("p",{staticClass:"caption-type"},[t._v(t._s(t.__("Hang tight, we'll be done in a jiffy.")))])]),t._v(" "),e("div",{staticClass:"tv-cell"},[e("button",{staticClass:"text-button",on:{click:t.cancelUpload}},[t._v(t._s(t.__("Cancel")))])])]],2)}),[],!1,null,"7244b4be",null);e.a=n.exports},1039:function(t,e,i){},1047:function(t,e,i){},1059:function(t,e,i){},1079:function(t,e,i){"use strict";var s=i(5),a=i(260),r=i(12),o=i(981),n=i(2),l=i(76),c=i(42),d=i(78),h=i(83),u=i(93),p=i(533),v=i(987),g=i(151),b=i(73),m={components:{BaseImage:g.a},props:{result:Object,width:Number,aspectRatio:Number},computed:{url(){if(this.result.thumbnail_width&&this.result.thumbnail_width>500){const t={width:this.width,crop:"thumb"};return this.aspectRatio&&(t.ar=this.aspectRatio),Object(b.processedUrl)(this.result.thumbnail_url,t)}return Object(b.proxiedUrl)(this.result.thumbnail_url)},height(){const t=this.aspectRatio?this.aspectRatio:this.result.thumbnail_width/this.result.thumbnail_height;return Math.floor(this.width/t)}}},f=i(3),_=Object(f.a)(m,(function(){return(0,this._self._c)("base-image",{attrs:{src:this.url,alt:this.result.title,height:this.height,width:this.width,loading:"lazy"}})}),[],!1,null,null,null).exports,w=i(353);const y={wallpaper:{allowedSources:["stock"],initialSearchMessage:Object(n.b)("Search wallpaper gallery.")},images:{allowedSources:["images"],initialSearchMessage:Object(n.b)("Search images.")},imagesAndGifs:{allowedSources:["images","gif"],initialSearchMessage:Object(n.b)("Search images and GIFs.")},all:{allowedSources:["images","videos","gif","audio","web"],initialSearchMessage:Object(n.b)("Search images, videos, GIFs, audio, websites, and more.")}};var C={components:{BaseIcon:u.a,BaseTextTabs:p.a,OzLoadingSpinner:h.a,WebBrowserThumbnail:_,WebBrowserAttribution:v.a},mixins:[w.a],props:{q:{type:String,default:""},preset:{type:String,default:"all",validator:t=>!!y[t]},xNewSurfaceShadows:{type:Boolean},user:{type:Object,required:!1,default:()=>{}}},data:()=>({query:"",activeSearchFilter:l.a.getItem("activeContentSearchFilter")||"images",searchResults:[],nextSearchUrl:null,prevSearchUrl:null,searchProvider:null,isSearching:!1,error:!1,imageWidth:0,MAX_SEARCH_LENGTH:100}),computed:{allowedSources(){return y[this.preset].allowedSources},xTabs(){return this.allowedSources.length>1},tabsData:()=>[{text:Object(n.b)("Images"),key:"images"},{text:Object(n.b)("Videos"),key:"videos"},{text:Object(n.b)("Gifs"),key:"gif"},{text:Object(n.b)("Audio"),key:"audio"},{text:Object(n.b)("Web"),key:"web"}],status(){let t=null;if(this.isSearching)t="searching";else if(this.query)if(this.error)t="error";else{t=0===(this.searchResults.webpages||this.searchResults.images||this.searchResults.videos||this.searchResults.audio||[]).length?"noresults":"results"}else t="initial";return t},searchResultContentType(){let t=null;return t=this.searchResults.webpages?"webpages":this.searchResults.images?"images":this.searchResults.videos?"videos":this.searchResults.audio?"audio":"unknown",t},showAttribution(){return["giphy","spotify","tenor","unsplash","youtube"].includes(this.searchProvider)},initialSearchMessage(){return y[this.preset].initialSearchMessage}},watch:{preset:{handler(){this.allowedSources.includes(this.activeSearchFilter)||(l.a.setItem("activeContentSearchFilter",this.allowedSources[0]),this.activeSearchFilter=this.allowedSources[0])},immediate:!0},query(t){if(t)if(Object(c.f)(t))this.select(t);else{const e=Object(o.a)(t);e?this.select(e):this.search({query:t,filter:this.activeSearchFilter})}else this.searchResults=[]},activeSearchFilter(t){Object(a.a)("Web Browser","Changed Filter",t),l.a.setItem("activeContentSearchFilter",t),this.query&&(this.search({query:this.query,filter:t}),this.$refs.queryInput.focus())}},mounted(){Object(a.a)("Web Browser","Mounted",this.activeSearchFilter),this.$refs.queryInput.focus(),this.$refs.container.style.overflow="scroll",this.imageWidth=Math.floor(this.$refs.container.clientWidth/2-12),this.$refs.container.style.overflow="auto",!this.q||Object(c.f)(this.q)||Object(o.a)(this.q)||(this.query=this.q.substring(0,100),this.$nextTick(()=>{this.$refs.queryInput.select()}))},methods:{providerName:t=>t.provider_name?t.provider_name:Object(c.c)(t.url),audioDescription:t=>t.release_date?new Date(t.release_date).toLocaleDateString()+" \u2013 "+t.description:t.description,search(t){var e;(this.isSearching=!0,this.error=!1,Object(a.a)("Web Browser","Searched",t.query),t.query)?Object(d.d)(t.query,null===(e=this.user)||void 0===e?void 0:e.id,t.filter).then(this.handleSearchResponse,this.handleErrorResponse):Object(d.e)(t.url).then(this.handleSearchResponse,this.handleErrorResponse)},handleSearchResponse(t){this.isSearching=!1,this.searchResults=t.data,t.links&&(this.prevSearchUrl=t.links.prev,this.nextSearchUrl=t.links.next),t.meta&&(this.searchProvider=t.meta.provider)},handleErrorResponse(t){Object(r.a)(t),this.isSearching=!1,this.error=!0},selectSearchType(t){this.activeSearchFilter=t},cancel(){this.close()},close(){this.$emit("close")},onSearch(){this.query=this.$refs.queryInput.value},select(t){this.$emit("select",t)},selectWithBeacon(t,e){e&&Object(s.fetchJson)(e,{cors:!0}),this.$emit("select",t)},searchNext(){this.search({url:this.nextSearchUrl})},searchPrev(){this.search({url:this.prevSearchUrl})}}},S=(i(1110),Object(f.a)(C,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"web-browser side-panel side-panel-with-curtain",on:{click:function(e){return e.target!==e.currentTarget?null:t.close.apply(null,arguments)}}},[e("div",{ref:"container",class:["panel-container","is-animated","slide-from-right",t.xNewSurfaceShadows?"shadow-elevation-3":"shadow-z3"]},[e("header",{staticClass:"panel-header panel-header-with-content"},[e("div",{staticClass:"panel-left-item"},[e("button",{staticClass:"text-button narrow-button",on:{click:t.close}},[t._v(t._s(t.__("Close")))])]),t._v(" "),e("div",{staticClass:"panel-title"},[t._v(t._s(t.__("Search")))]),t._v(" "),e("div",{staticClass:"panel-right-item"})]),t._v(" "),e("form",{class:["panel-header-content",{"panel-header-content-last":!t.xTabs}],on:{submit:function(e){return e.preventDefault(),t.onSearch.apply(null,arguments)}}},[e("div",{staticClass:"web-browser-form-container"},[e("input",{ref:"queryInput",attrs:{type:"search",maxlength:t.MAX_SEARCH_LENGTH,autofocus:"",placeholder:t.__("Enter search term")},domProps:{value:t.query}}),t._v(" "),e("button",{staticClass:"icon-button",attrs:{type:"submit",title:t.__("Search")}},[e("base-icon",{attrs:{name:"arrow_forward"}})],1)])]),t._v(" "),t.xTabs?e("base-text-tabs",{staticClass:"web-browser-tabs panel-header-content-last",attrs:{tabs:t.tabsData,"active-key":t.activeSearchFilter,"click-handler":t.selectSearchType}}):t._e(),t._v(" "),"results"!=t.status?e("div",{staticClass:"web-browser-messages",attrs:{"data-status":t.status}},["initial"===t.status?e("div",{staticClass:"caption-type web-browser-padded-message"},[t._v("\n        "+t._s(t.initialSearchMessage)+"\n      ")]):"searching"==t.status?e("OzLoadingSpinner"):"noresults"==t.status?e("div",{staticClass:"caption-type web-browser-padded-message"},[e("p",[t._v(t._s(t.__("No results found for your search term.")))]),t._v(" "),e("p",[t._v(t._s(t.__("Hope you find what you are looking for!")))])]):"error"==t.status?e("div",{staticClass:"caption-type web-browser-padded-message"},[t._v("\n        "+t._s(t.__("Oops! Something went wrong. Please try again."))+"\n      ")]):t._e()],1):e("div",{staticClass:"web-browser-results",attrs:{"data-content-type":t.searchResultContentType}},[t.nextSearchUrl||t.prevSearchUrl?e("div",{staticClass:"web-browser-pagination-control web-browser-pagination-control-top"},[e("div",{staticClass:"web-browser-pagination-control-prev"},[t.prevSearchUrl?e("button",{staticClass:"caption-text-button narrow-button",on:{click:t.searchPrev}},[t._v("\n            "+t._s(t.__("Previous"))+"\n          ")]):t._e()]),t._v(" "),t.showAttribution?e("div",[e("web-browser-attribution",{attrs:{provider:t.searchProvider}})],1):t._e(),t._v(" "),e("div",{staticClass:"web-browser-pagination-control-next"},[t.nextSearchUrl?e("button",{staticClass:"caption-text-button narrow-button",on:{click:t.searchNext}},[t._v("\n            "+t._s(t.__("Next"))+"\n          ")]):t._e()])]):t._e(),t._v(" "),"webpages"==t.searchResultContentType?e("ul",{staticClass:"tv tv-list"},t._l(t.searchResults.webpages,(function(i){return e("li",{key:i.url,staticClass:"web-browser-webpage-result tv-cell tv-cell-actionable",on:{click:function(e){return t.select(i.url)}}},[e("h4",[t._v(t._s(i.title))]),t._v(" "),e("p",{staticClass:"small-type"},[t._v(t._s(i.description))]),t._v(" "),e("p",{staticClass:"small-caption-type ellipsified-type"},[t._v(t._s(i.url))])])})),0):"stock"===t.activeSearchFilter?e("ul",{staticClass:"tv tv-list"},t._l(t.searchResults.images,(function(i){return e("li",{key:i.url,staticClass:"web-browser-result",style:{width:t.imageWidth+"px"},on:{click:function(e){return t.selectWithBeacon(i.url,i.beacon_link)}}},[e("div",{staticClass:"web-browser-result-preview"},[e("web-browser-thumbnail",{attrs:{result:i,width:t.imageWidth,"aspect-ratio":1}})],1),t._v(" "),e("div",{staticClass:"web-browser-result-meta web-browser-result-meta-with-attribution"},[e("div",{staticClass:"web-browser-result-meta-text"},[e("div",{staticClass:"small-type"},[t._v(t._s(i.title))])]),t._v(" "),e("a",{staticClass:"caption-type",attrs:{href:i.attribution_link,target:"blank"},on:{click:function(t){t.stopPropagation()}}},[e("base-icon",{attrs:{name:"link",size:"small"}})],1)])])})),0):"images"==t.searchResultContentType?e("ul",{staticClass:"tv tv-list"},t._l(t.searchResults.images,(function(i){return e("li",{key:i.url,staticClass:"web-browser-result",style:{width:t.imageWidth+"px"},on:{click:function(e){return t.selectWithBeacon(i.url,i.beacon_link)}}},[e("div",{staticClass:"web-browser-result-preview"},[e("web-browser-thumbnail",{attrs:{result:i,width:t.imageWidth}})],1),t._v(" "),i.attribution_link?e("div",{staticClass:"web-browser-result-meta web-browser-result-meta-with-attribution"},[e("div",{staticClass:"web-browser-result-meta-text"},[e("div",{staticClass:"small-type ellipsified-type",attrs:{title:i.title}},[t._v(t._s(i.title))]),t._v(" "),e("div",{staticClass:"small-caption-type ellipsified-type"},[t._v(t._s(t.providerName(i)))]),t._v(" "),e("div",{staticClass:"small-type muted-type ellipsified-type"},[t._v(t._s(i.width)+"x"+t._s(i.height))])]),t._v(" "),e("a",{staticClass:"caption-type",attrs:{href:i.attribution_link,target:"blank"},on:{click:function(t){t.stopPropagation()}}},[e("base-icon",{attrs:{name:"link",size:"small"}})],1)]):e("div",{staticClass:"web-browser-result-meta"},["images"==t.activeSearchFilter?e("div",{staticClass:"small-type"},[t._v(t._s(i.width)+"x"+t._s(i.height))]):t._e(),t._v(" "),e("div",{staticClass:"small-caption-type ellipsified-type"},[t._v(t._s(t.providerName(i)))])])])})),0):"audio"==t.searchResultContentType?e("ul",{staticClass:"tv tv-list"},t._l(t.searchResults.audio,(function(i){return e("li",{key:i.url,staticClass:"web-browser-result",style:{width:t.imageWidth+"px"},on:{click:function(e){return t.select(i.url)}}},[e("div",{staticClass:"web-browser-result-preview"},[e("web-browser-thumbnail",{attrs:{result:i,width:t.imageWidth,"aspect-ratio":1}}),t._v(" "),i.duration?e("div",{staticClass:"web-browser-result-duration"},[t._v(t._s(i.duration))]):t._e()],1),t._v(" "),e("div",{staticClass:"web-browser-result-meta"},[e("div",{staticClass:"small-type"},[t._v(t._s(i.title))]),t._v(" "),e("div",{staticClass:"small-caption-type ellipsified-type",attrs:{title:t.audioDescription(i)}},[t._v("\n              "+t._s(t.audioDescription(i))+"\n            ")])])])})),0):"videos"==t.searchResultContentType?e("ul",{staticClass:"tv tv-list"},t._l(t.searchResults.videos,(function(i){return e("li",{key:i.url,staticClass:"web-browser-result",style:{width:t.imageWidth+"px"},on:{click:function(e){return t.select(i.url)}}},[e("div",{staticClass:"web-browser-result-preview"},[e("web-browser-thumbnail",{attrs:{result:i,width:t.imageWidth}}),t._v(" "),i.duration?e("div",{staticClass:"web-browser-result-duration"},[t._v(t._s(i.duration))]):t._e()],1),t._v(" "),e("div",{staticClass:"web-browser-result-meta"},[e("div",{staticClass:"small-type"},[t._v(t._s(i.title))]),t._v(" "),e("div",{staticClass:"small-caption-type ellipsified-type"},[t._v(t._s(t.providerName(i)))])])])})),0):t._e(),t._v(" "),t.nextSearchUrl||t.prevSearchUrl?e("div",{staticClass:"web-browser-pagination-control"},[e("div",{staticClass:"web-browser-pagination-control-prev"},[t.prevSearchUrl?e("button",{staticClass:"caption-text-button narrow-button",on:{click:t.searchPrev}},[t._v("\n            "+t._s(t.__("Previous"))+"\n          ")]):t._e()]),t._v(" "),t.showAttribution?e("div",[e("web-browser-attribution",{attrs:{provider:t.searchProvider}})],1):t._e(),t._v(" "),e("div",{staticClass:"web-browser-pagination-control-next"},[t.nextSearchUrl?e("button",{staticClass:"caption-text-button narrow-button",on:{click:t.searchNext}},[t._v("\n            "+t._s(t.__("Next"))+"\n          ")]):t._e()])]):t.showAttribution?e("div",{staticClass:"web-browser-attribution-control"},[e("web-browser-attribution",{attrs:{provider:t.searchProvider}})],1):t._e()])],1)])}),[],!1,null,"73ed30ca",null));e.a=S.exports},1080:function(t,e,i){"use strict";var s=i(990),a=i(353),r=i(546),o=i(1095),n=i.n(o),l=i(5),c=i(260),d={components:{AttachmentPreview:r.a},mixins:[s.a,a.a],props:{cabinet:{type:Boolean,default:!0},maxFileSize:{type:Number},xNewSurfaceShadows:{type:Boolean}},data:()=>({imageSrc:n.a,dragging:!1,fileWidth:175,lazyLoadingThreshold:20,existingFilesSubset:[],existingFiles:[]}),mounted(){this.cabinet&&(this.$refs.container.style.overflow="scroll",this.fileWidth=Math.floor(this.$refs.container.clientWidth/2-12),this.$refs.container.style.overflow="auto",Object(l.fetchJson)("/api/attachments?filter=files").then(t=>{this._intersectionObserver.observe(this.$refs.io),this.existingFiles=t,this.existingFilesSubset=this.existingFiles.slice(0,this.lazyLoadingThreshold)}),this._intersectionObserver=new IntersectionObserver(this.onIntersection.bind(this)))},beforeDestroy(){this._intersectionObserver.disconnect()},methods:{close(){this.$emit("close")},cancel(){this.uploading?window.confirm(this.__("You are in the middle of an upload. Are you sure you want to close the file browser?"))&&this.close():this.close()},onDragLeave(){this.dragging=!1},onDragOver(){this.uploading||(this.dragging=!0)},onDrop(t){if(!this.uploading&&(this.dragging=!1,t.dataTransfer)){Object(c.a)("File Browser","Dragged File");const e=t.dataTransfer.files;e&&e.length>0&&this.handleFile(e[0])}},onIntersection(t){if(t[0].intersectionRatio>0&&this.existingFiles.length>this.existingFilesSubset.length){const t=this.existingFilesSubset.length+this.lazyLoadingThreshold;this.existingFilesSubset=this.existingFiles.slice(0,t)}},onUploadCancel(){this.uploading=!1},onUploadReject(t,e){this.$emit("reject",t,e)},selectFileFromCabinet(t){Object(c.a)("File Browser","Selected Existing"),this.$emit("select",t.currentTarget.href)},startUpload(t){Object(c.a)("File Browser","Picked File");const e=t.target.files[0];this.handleFile(e)}}},h=(i(1096),i(3)),u=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"file-browser panel side-panel side-panel-with-curtain",attrs:{"data-dragging":t.dragging},on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel.apply(null,arguments)}}},[e("div",{ref:"container",class:["panel-container","is-animated","slide-from-right",t.xNewSurfaceShadows?"shadow-elevation-3":"shadow-z3"],on:{dragover:function(e){return e.preventDefault(),t.onDragOver.apply(null,arguments)},dragleave:function(e){return e.preventDefault(),t.onDragLeave.apply(null,arguments)},drop:function(e){return e.preventDefault(),t.onDrop.apply(null,arguments)}}},[t.uploading?e("div",{staticClass:"panel-body file-browser-uploading-body"},[t.uploading?e("interstitial-uploader",{staticClass:"panel-interstitial",attrs:{file:t.file,"max-file-size":t.maxFileSize},on:{done:t.onUploadDone,reject:t.onUploadReject,cancel:t.onUploadCancel}}):t._e()],1):t.dragging?e("div",{staticClass:"panel-body panel-interstitial file-browser-drop-message"},[e("div",{staticClass:"tv-cell"},[e("img",{attrs:{src:t.imageSrc,width:"218",height:"130"}})]),t._v(" "),e("div",{staticClass:"tv-cell strong-type"},[t._v(t._s(t.__("Drop file here to upload.")))])]):[e("header",{staticClass:"panel-header"},[e("div",{staticClass:"panel-left-item"},[e("button",{staticClass:"text-button narrow-button",on:{click:t.cancel}},[t._v(t._s(t.__("Close")))])]),t._v(" "),e("div",{staticClass:"panel-title"},[t._v(t._s(t.__("Files")))]),t._v(" "),e("div",{staticClass:"panel-right-item"})]),t._v(" "),e("div",{staticClass:"panel-body file-browser-input-body"},[e("label",{staticClass:"tv file-browser-drag-message",attrs:{for:"input"+t._uid}},[e("div",{staticClass:"tv-cell"},[e("p",[e("strong",[t._v(t._s(t.__("Pick a file from your computer by dragging it here or by clicking the button below.")))])]),t._v(" "),e("p",{staticClass:"caption-type small-type"},[t._v("\n              "+t._s(t.__("We support all kinds of files \u2013 images, videos, docs, spreadsheets, presentations, pdfs, songs, and more."))+"\n            ")])]),t._v(" "),e("div",{staticClass:"tv-cell"},[e("div",{staticClass:"raised-button"},[t._v(t._s(t.__("Pick file")))])])]),t._v(" "),e("input",{attrs:{id:"input"+t._uid,type:"file"},on:{change:t.startUpload}}),t._v(" "),t.cabinet&&t.existingFiles.length>0?e("div",{staticClass:"file-browser-cabinet"},[e("div",{staticClass:"caption-type tv-cell file-browser-cabinet-title"},[t._v("\n            "+t._s(t.__("Or, select a file from your padlet drive"))+"\n          ")]),t._v(" "),t._l(t.existingFilesSubset,(function(i){return e("a",{key:i,staticClass:"file-browser-file",style:{width:t.fileWidth+"px"},attrs:{href:i},on:{click:function(e){return e.preventDefault(),t.selectFileFromCabinet.apply(null,arguments)}}},[e("attachment-preview",{staticClass:"file-browser-attachment",attrs:{url:i,actionable:!1,"show-provider":!1,width:t.fileWidth}})],1)}))],2):t._e(),t._v(" "),e("div",{ref:"io",staticClass:"file-browser-observer"})])]],2)])}),[],!1,null,"2278a656",null);e.a=u.exports},1084:function(t,e,i){"use strict";i(1039)},1095:function(t,e,i){t.exports=i.p+"media/images/add_attachment-cc32506c94bdce447ac94382cf3812cb.svg"},1096:function(t,e,i){"use strict";i(1047)},1110:function(t,e,i){"use strict";i(1059)},1336:function(t,e,i){},1337:function(t,e,i){},135:function(t,e,i){},1397:function(t,e,i){"use strict";var s=i(93),a=i(990),r=i(353),o=i(2),n=i(260),l=i(76),c=i(12);function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var s,a,r=[],o=!0,n=!1;try{for(i=i.call(t);!(o=(s=i.next()).done)&&(r.push(s.value),!e||r.length!==e);o=!0);}catch(l){n=!0,a=l}finally{try{o||null==i.return||i.return()}finally{if(n)throw a}}return r}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}const u=!!window.PointerEvent;var p={components:{BaseIcon:s.a},mixins:[a.a,r.a],data:()=>({activeStrokes:[],availableColors:{black:["black",Object(o.b)("Black")],white:["white",Object(o.b)("White")],red:["#FA3142",Object(o.b)("Red")],blue:["#157FFB",Object(o.b)("Blue")],yellow:["#FDD230",Object(o.b)("Yellow")],green:["#51D727",Object(o.b)("Green")],pink:["#F17CFC",Object(o.b)("Pink")],purple:["#835FF4",Object(o.b)("Purple")],cyan:["#72E1FD",Object(o.b)("Cyan")],orange:["#FF9800",Object(o.b)("Orange")],brown:["#985213",Object(o.b)("Brown")]},backgroundColor:l.a.getItem("canvasBackgroundColor")||"white",brush:"pen",canvasWidth:null,canvasHeight:null,colorName:"black",colors:[],lineWidths:[],paint:!1,redoColors:[],redoLineWidths:[],redoStrokeSets:[],saveButton:!0,scaledCanvasWidth:null,scaledCanvasHeight:null,strokeSets:[],eventHistory:[]}),computed:{backgroundSelectorStyle(){return this.canvasWidth>320?"radio":"select"},brushColorName(){return"pen"===this.brush?this.colorName:this.backgroundColor},brushSize(){return"eraser"===this.brush?21:3},canvasStyle(){let t="crosshair";return"eraser"===this.brush&&(t="grabbing"),{width:this.canvasWidth+"px",height:this.canvasHeight+"px",cursor:t}},canUndo(){return this.strokeSets.length>0},canRedo(){return this.redoStrokeSets.length>0},colorHex(){return this.availableColors[this.colorName][0]},hasDrawn(){return this.strokeSets.length>0||this.redoStrokeSets.length>0}},mounted(){Object(n.a)("Drawing Canvas","Mounted",this.backgroundColor);const t=this.$refs.canvas,e=window.devicePixelRatio;this.canvasWidth=t.clientWidth,this.canvasHeight=t.clientHeight,this.scaledCanvasWidth=Math.floor(this.canvasWidth*e),this.scaledCanvasHeight=Math.floor(this.canvasHeight*e),"black"===this.backgroundColor&&(this.colorName="white"),this.$nextTick(()=>{const i=t.getContext("2d");i.scale(e,e),i.fillStyle=this.backgroundColor,i.fillRect(0,0,t.width,t.height)})},methods:{addPixels(t){this.redoStrokeSets=[],this.redoLineWidths=[],this.redoColors=[];const e=this.strokeSets[this.strokeSets.length-1];e||Object(c.c)("Stroke Set Issue With Drawing",{context:{strokeSetLength:this.strokeSets.length,activeStrokeLength:this.activeStrokes.length,eventHistory:this.eventHistory}});const i=this.$refs.canvas.getBoundingClientRect();for(const s of t){const t=s.pointerId?s.pointerId:s.identifier,a=t?e.find(e=>e.id===t):e[0],r=s.pageX-i.left,o=s.pageY-i.top;a.pixels.push([r,o])}this.redraw()},addStrokesToCurrentSet(t){const e=this.strokeSets[this.strokeSets.length-1];this.strokeSets[this.strokeSets.length-1]=e.concat(t.map(t=>this.newStroke(t)))},cancel(){this.hasDrawn?confirm(Object(o.b)("You have not saved your drawing. Are you sure you want to close the canvas?"))&&this.close():this.close()},changeBackgroundColor(t){const e=t.currentTarget.value,i=this.backgroundColor;this.backgroundColor=e,l.a.setItem("canvasBackgroundColor",e),this.colorName===e&&(this.colorName=i),this.colors=this.colors.map(t=>t===e?i:t===i?e:t),this.$nextTick(()=>{this.redraw()}),Object(n.a)("Drawing Canvas","Changed Bg",e)},close(){this.$emit("close")},exportCoordinates(){let t=Math.min.apply(null,this.pixelsX),e=Math.max.apply(null,this.pixelsX),i=Math.min.apply(null,this.pixelsY),s=Math.max.apply(null,this.pixelsY);const a=this.$refs.canvas.width,r=this.$refs.canvas.height;return t=Math.max(t-16,0),e=Math.min(e+16,a),i=Math.max(i-16,0),s=Math.min(s+16,r),{x:t,y:i,width:e-t,height:s-i}},hideSaveButton(){this.saveButton=!1},newStroke:t=>({id:t,pixels:[]}),onMouseDown(t){u||(this.startNewStrokeSet(),this.addStrokesToCurrentSet(["id"]),this.paint=!0,this.addPixels([t]))},onMouseMove(t){u||this.paint&&this.addPixels([t])},onMouseUp(){u||(this.paint=!1)},onPointerDown(t){this.eventHistory.push("pointerdown"),0===this.activeStrokes.length&&this.startNewStrokeSet(),this.paint=!0,this.addStrokesToCurrentSet([t.pointerId]),this.activeStrokes.push(t.pointerId),this.addPixels([t])},onPointerMove(t){this.eventHistory.push("pointermove"),this.paint&&this.addPixels([t])},onPointerUp(t){this.eventHistory.push("pointerup");const e=t.pointerId;this.activeStrokes=this.activeStrokes.filter(t=>t!==e),0===this.activeStrokes.length&&(this.paint=!1)},onTouchEnd(t){if(u)return;const e=Array.from(t.changedTouches).map(t=>t.identifier);this.activeStrokes=this.activeStrokes.filter(t=>!e.includes(t)),0===this.activeStrokes.length&&(this.paint=!1)},onTouchMove(t){if(!u&&this.paint){const e=Array.from(t.touches);this.addPixels(e)}},onTouchStart(t){if(u)return;this.paint=!0;const e=Array.from(t.touches),i=e.map(t=>t.identifier);0===this.activeStrokes.length&&this.startNewStrokeSet();const s=i.filter(t=>!this.activeStrokes.includes(t));this.addStrokesToCurrentSet(s),this.activeStrokes=i,this.addPixels(e)},onMouseOut(){this.onMouseUp()},onPointerOut(t){this.onPointerUp(t)},pickBrush(t){this.brush=t},pickColor(t){this.colorName=t},redo(){this.strokeSets.push(this.redoStrokeSets.shift()),this.lineWidths.push(this.redoLineWidths.shift()),this.colors.push(this.redoColors.shift()),this.redraw()},redraw(){const t=this.strokeSets.length,e=this.$refs.canvas,i=e.getContext("2d");i.fillStyle=this.backgroundColor,i.fillRect(0,0,e.width,e.height),i.lineJoin="round",i.lineCap="round";for(let s=0;s<t;s++){const t=this.strokeSets[s];for(const e of t){const t=e.pixels,a=t.length;if(i.beginPath(),0===a);else if(1===a){const e=d(t[0],2),s=e[0],a=e[1];i.moveTo(s-1,a-1),i.lineTo(s,a)}else if(2===a){const e=d(t[0],2),s=e[0],a=e[1],r=d(t[1],2),o=r[0],n=r[1];i.quadraticCurveTo(s,a,o,n)}else{const e=d(t[0],2),s=e[0],r=e[1];i.moveTo(s,r);for(let p=1;p<=a-3;p++){const e=d(t[p],2),s=e[0],a=e[1],r=d(t[p+1],2),o=(s+r[0])/2,n=(a+r[1])/2;i.quadraticCurveTo(s,a,o,n)}const o=d(t[a-2],2),n=o[0],l=o[1],c=d(t[a-1],2),h=c[0],u=c[1];i.quadraticCurveTo(n,l,h,u)}i.strokeStyle=this.availableColors[this.colors[s]][0],i.lineWidth=this.lineWidths[s],i.stroke()}}},save(){const t=this.$refs.canvas;if(t.msToBlob){const e=t.msToBlob("image/png");e.name="drawing.png",this.handleFile(e)}else t.toBlob(t=>{t.name="drawing.png",this.handleFile(t)},"image/png")},showSaveButton(){this.saveButton=!0},startNewStrokeSet(){this.strokeSets.push([]),this.colors.push(this.brushColorName),this.lineWidths.push(this.brushSize)},undo(){this.redoStrokeSets.unshift(this.strokeSets.pop()),this.redoLineWidths.unshift(this.lineWidths.pop()),this.redoColors.unshift(this.colors.pop()),this.redraw()}}},v=(i(1644),i(3)),g=Object(v.a)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"drawing-canvas modal panel",on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel.apply(null,arguments)}}},[e("div",{staticClass:"panel-container is-animated scale-up",attrs:{"data-theme":t.backgroundColor}},[t.uploading?e("div",[e("header",{staticClass:"panel-header"}),t._v(" "),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"panel-interstitial"},[e("interstitial-uploader",{attrs:{file:t.file,download:!0,title:"Saving drawing"},on:{done:t.onUploadDone,cancel:t.onUploadCancel}})],1)]),t._v(" "),e("footer",{staticClass:"panel-footer"})]):[e("header",{staticClass:"panel-header"},[e("div",{staticClass:"panel-left-item"},[e("button",{staticClass:"text-button narrow-button",on:{click:t.cancel}},[t._v(t._s(t.__("Close")))])]),t._v(" "),e("div",{staticClass:"drawing-canvas-undo"},[e("button",{staticClass:"icon-button",attrs:{disabled:!t.canUndo,title:t.__("Undo")},on:{click:t.undo}},[e("base-icon",{attrs:{name:"undo"}})],1),t._v(" "),e("button",{staticClass:"icon-button",attrs:{disabled:!t.canRedo,title:t.__("Redo")},on:{click:t.redo}},[e("base-icon",{attrs:{name:"redo"}})],1)]),t._v(" "),e("div",["radio"===t.backgroundSelectorStyle?e("div",{staticClass:"radio-button"},[e("label",[e("input",{attrs:{type:"radio",value:"white"},domProps:{checked:"white"==t.backgroundColor},on:{change:t.changeBackgroundColor}}),e("span",[t._v(t._s(t.__("White")))])]),t._v(" "),e("label",[e("input",{attrs:{type:"radio",value:"black"},domProps:{checked:"black"==t.backgroundColor},on:{change:t.changeBackgroundColor}}),e("span",[t._v(t._s(t.__("Black")))])])]):e("div",{staticClass:"select-box"},[e("select",{on:{change:t.changeBackgroundColor,focus:t.hideSaveButton,blur:t.showSaveButton}},[e("option",{attrs:{value:"white"}},[t._v(t._s(t.__("White")))]),t._v(" "),e("option",{attrs:{value:"black"}},[t._v(t._s(t.__("Black")))])])])]),t._v(" "),e("div",{staticClass:"panel-right-item"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.saveButton,expression:"saveButton"}],staticClass:"flat-button narrow-button",on:{click:t.save}},[t._v(t._s(t.__("Save")))])])]),t._v(" "),e("div",{staticClass:"panel-body"},[e("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:t.scaledCanvasWidth,height:t.scaledCanvasHeight},on:{pointerdown:t.onPointerDown,mousedown:t.onMouseDown,touchstart:function(e){return e.preventDefault(),t.onTouchStart.apply(null,arguments)},pointerup:t.onPointerUp,mouseup:t.onMouseUp,touchend:function(e){return e.preventDefault(),t.onTouchEnd.apply(null,arguments)},pointermove:t.onPointerMove,mousemove:t.onMouseMove,touchmove:function(e){return e.preventDefault(),t.onTouchMove.apply(null,arguments)},mouseout:t.onMouseOut,pointerout:t.onPointerOut}})]),t._v(" "),e("footer",{staticClass:"panel-footer"},[e("div",{staticClass:"color-picker"},t._l(t.availableColors,(function(i,s){return s!=t.backgroundColor?e("button",{key:s,class:{active:t.colorName==s},on:{click:function(e){return t.pickColor(s)}}},[e("div",{style:{background:i[0]}})]):t._e()})),0),t._v(" "),e("div",{staticClass:"brush-picker"},[e("button",{class:{"icon-button":!0},style:{color:"pen"==t.brush?t.colorHex:null},attrs:{title:t.__("Pen")},on:{click:function(e){return t.pickBrush("pen")}}},[e("base-icon",{attrs:{name:"edit"}})],1),t._v(" "),e("button",{class:{"icon-button":!0,active:"eraser"==t.brush},attrs:{title:t.__("Eraser")},on:{click:function(e){return t.pickBrush("eraser")}}},[e("base-icon",{attrs:{name:"eraser"}})],1)])])]],2)])}),[],!1,null,"57d485ee",null);e.a=g.exports},1398:function(t,e,i){"use strict";var s=i(260),a=i(1018),r=i(83),o=i(93),n=i(986),l=i(990),c=i(353),d={components:{BaseIcon:o.a,OzLoadingSpinner:r.a},mixins:[l.a,n.a,c.a],data:()=>({canvasWidth:640,canvasHeight:360,filter:"normal",filtersEnabled:!1,hiddenCanvasWidth:640,hiddenCanvasHeight:360,captured:!1,secondsToCapture:0,title:""}),computed:{constraints(){return{video:{deviceId:this.activeVideoDeviceId?{exact:this.activeVideoDeviceId}:void 0,width:3840,height:2160,aspectRatio:16/9}}}},mounted(){this.mountStreaming()},beforeDestroy(){this.stopStreaming()},methods:{applyFilter(t){this.filter=t.target.value,this.draw(!1),Object(s.a)("Photo Booth","Applied Filter",this.filter)},cancel(){this.captured?confirm(this.__("You have not saved your photo. Are you sure you want to close photo booth?"))&&this.close():this.close()},close(){this.$emit("close")},captureInThree(){this.secondsToCapture=3,setTimeout(()=>{this.secondsToCapture=2},1e3),setTimeout(()=>{this.secondsToCapture=1},2e3),setTimeout(()=>{this.secondsToCapture=0,this.capture()},3e3)},capture(){Object(s.a)("Photo Booth","Captured"),this.playSound(),this.captured=!0,this.draw(!0),this.$nextTick(()=>{this.$refs.captionInput.focus()})},draw(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.$refs.canvas,i=this.$refs.player,s=e.getContext("2d"),a=this.$refs.hiddenCanvas,r=a.getContext("2d");s.filter&&(this.filtersEnabled=!0,"normal"===this.filter?(s.filter="none",r.filter="none"):"sepia"===this.filter?(s.filter="sepia(100%)",r.filter="sepia(100%)"):"grayscale"===this.filter&&(s.filter="grayscale(100%)",r.filter="grayscale(100%)")),t?(s.drawImage(i,0,0,e.width,e.height),r.drawImage(i,0,0,a.width,a.height)):s.drawImage(a,0,0,e.width,e.height)},gotStream(t){const e=t.getVideoTracks()[0];if("function"===typeof e.getSettings){const t=e.getSettings();t.height&&(this.hiddenCanvasHeight=t.height),t.width&&(this.hiddenCanvasWidth=t.width),t.aspectRatio&&(this.canvasHeight=Math.floor(this.canvasWidth/t.aspectRatio))}this.$refs.player.srcObject=t},playSound(){a.a.play()},redo(){Object(s.a)("Photo Booth","Redo"),this.captured=!1},save(){Object(s.a)("Photo Booth","Saved");const t=this.$refs.hiddenCanvas,e=this.$refs.captionInput.value;if("normal"!==this.filter){t.getContext("2d").drawImage(t,0,0,t.width,t.height)}if(this.handleCaption(e),t.msToBlob){const e=t.msToBlob("image/jpeg");e.name="drawing.png",this.handleFile(e)}else t.toBlob(t=>{const e=(this.title||"photo")+".jpeg";t.name=e,this.handleFile(t)},"image/jpeg")}}},h=(i(1645),i(3)),u=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"photo-booth modal panel panel-top",on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel.apply(null,arguments)}}},[e("div",{staticClass:"panel-container is-animated slide-from-top"},[t.uploading?e("div",[e("header",{staticClass:"panel-header"}),t._v(" "),e("div",{staticClass:"panel-body",style:{height:t.canvasHeight+"px"}},[e("div",{staticClass:"panel-interstitial"},[e("interstitial-uploader",{attrs:{file:t.file,download:!0,title:t.__("Saving photo")},on:{done:t.onUploadDone,cancel:t.onUploadCancel}})],1)]),t._v(" "),e("footer",{staticClass:"panel-footer"})]):e("div",[e("header",{staticClass:"panel-header"},[e("div",{staticClass:"panel-left-item"},[e("button",{staticClass:"text-button narrow-button",on:{click:t.cancel}},[t._v(t._s(t.__("Close")))])]),t._v(" "),e("div",{staticClass:"panel-title"},[t._v(t._s(t.__("Photo booth")))]),t._v(" "),e("div",{staticClass:"panel-right-item"},[t.captured?e("button",{staticClass:"flat-button narrow-button",on:{click:t.save}},[t._v(t._s(t.__("Save")))]):t._e()])]),t._v(" "),e("div",{staticClass:"panel-body",style:{height:t.canvasHeight+"px"}},[t.streaming?t._e():e("div",{staticClass:"panel-interstitial"},[e("div",{staticClass:"tv"},[e("div",{staticClass:"tv-cell"},[e("OzLoadingSpinner")],1),t._v(" "),e("div",{staticClass:"tv-cell"},[e("p",[t._v(t._s(t.__("Starting camera ...")))]),t._v(" "),e("p",{staticClass:"caption-type"},[t._v("\n                "+t._s(t.__("Please make sure you have given us permission to use your camera."))+"\n              ")])])])]),t._v(" "),e("video",{ref:"player",class:{"out-of-bounds":t.captured||!t.streaming},attrs:{width:t.canvasWidth,height:t.canvasHeight,autoplay:""}}),t._v(" "),e("canvas",{ref:"canvas",class:{"out-of-bounds":!t.captured},attrs:{width:t.canvasWidth,height:t.canvasHeight}}),t._v(" "),e("canvas",{ref:"hiddenCanvas",class:{"out-of-bounds":!0},attrs:{width:t.hiddenCanvasWidth,height:t.hiddenCanvasHeight}})]),t._v(" "),e("footer",{staticClass:"panel-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.streaming&&!t.captured&&0===t.secondsToCapture,expression:"streaming && !captured && secondsToCapture === 0"}],staticClass:"floating-action-button shadow-z2 hover-hover:hover:shadow-z3",attrs:{title:t.__("Capture")},on:{click:t.captureInThree}},[e("base-icon",{attrs:{name:"camera"}})],1),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.captured,expression:"captured"}],staticClass:"floating-action-button photo-booth-redo",attrs:{title:t.__("Redo")},on:{click:t.redo}},[e("base-icon",{attrs:{name:"refresh"}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.secondsToCapture>0,expression:"secondsToCapture > 0"}],staticClass:"photo-booth-countdown notice-scheme"},[e("div",{staticClass:"is-animated scale-up"},[t._v(t._s(t.secondsToCapture))])]),t._v(" "),!t.captured&&t.videoDevices.length>1?e("div",{staticClass:"photo-booth-video-chooser"},[e("div",{staticClass:"select-box"},[e("select",{on:{change:t.chooseVideoDevice}},t._l(t.videoDevices,(function(i){return e("option",{key:i.id,domProps:{selected:i.id==t.activeVideoDeviceId,value:i.id}},[t._v("\n                "+t._s(i.label)+"\n              ")])})),0)])]):t._e(),t._v(" "),t.captured?e("div",{staticClass:"photo-booth-caption-form"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"captionInput",attrs:{type:"text",autofocus:"",placeholder:t.__("Enter a caption (optional)")},domProps:{value:t.title},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save.apply(null,arguments)},input:function(e){e.target.composing||(t.title=e.target.value)}}})]):t._e(),t._v(" "),t.captured&&t.filtersEnabled?e("div",{staticClass:"photo-booth-filter-form"},[e("div",{staticClass:"radio-button"},[e("label",[e("input",{attrs:{type:"radio",value:"normal"},domProps:{checked:"normal"==t.filter},on:{change:t.applyFilter}}),e("span",[t._v("\n                "+t._s(t.__("Normal"))+"\n              ")])]),t._v(" "),e("label",[e("input",{attrs:{type:"radio",value:"grayscale"},domProps:{checked:"grayscale"==t.filter},on:{change:t.applyFilter}}),e("span",[t._v("\n                "+t._s(t.__("Grayscale"))+"\n              ")])]),t._v(" "),e("label",[e("input",{attrs:{type:"radio",value:"sepia"},domProps:{checked:"sepia"==t.filter},on:{change:t.applyFilter}}),e("span",[t._v("\n                "+t._s(t.__("Sepia"))+"\n              ")])])])]):t._e()])])])])}),[],!1,null,"7bffcd0c",null);e.a=u.exports},1644:function(t,e,i){"use strict";i(1336)},1645:function(t,e,i){"use strict";i(1337)},216:function(t,e,i){"use strict";i(135)},531:function(t,e,i){},533:function(t,e,i){"use strict";var s,a,r,o,n=i(9),l=i(0),c=function(t,e,i,s){var a,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(o=(r<3?a(o):r>3?a(e,i,o):a(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},d=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t.default="default",t.small="small"}(s||(s={})),function(t){t.default="default",t.caps="caps"}(a||(a={})),function(t){t.none="none",t.fit="fit",t.scroll="scroll"}(r||(r={})),function(t){t.none="none",t.fit="fit"}(o||(o={}));let h=class extends l.j{get containerClasses(){const t=["tabs-container"];return this.widthFitting===r.scroll&&t.push("scroll-width"),this.widthFitting===r.fit&&t.push("fit-width"),this.heightFitting===o.fit&&t.push("fit-height"),this.size===s.small&&t.push("tabs-small"),this.font===a.caps&&t.push("tabs-caps"),t}onTabClick(t){this.clickHandler?this.clickHandler(t.key):Object(n.u)(t.href)}};c([Object(l.h)({default:()=>[]}),d("design:type",Array)],h.prototype,"tabs",void 0),c([Object(l.h)({default:null}),d("design:type",Object)],h.prototype,"activeKey",void 0),c([Object(l.h)({default:r.fit}),d("design:type",Object)],h.prototype,"widthFitting",void 0),c([Object(l.h)({default:o.fit}),d("design:type",Object)],h.prototype,"heightFitting",void 0),c([Object(l.h)({default:s.default}),d("design:type",Object)],h.prototype,"size",void 0),c([Object(l.h)({default:a.caps}),d("design:type",Object)],h.prototype,"font",void 0),c([Object(l.h)({default:null}),d("design:type",Object)],h.prototype,"clickHandler",void 0),h=c([Object(l.b)({})],h);var u=h,p=(i(719),i(3)),v=Object(p.a)(u,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ul",{class:t.containerClasses,attrs:{role:"tablist"}},t._l(t.tabs,(function(i){return e("li",{key:i.key,class:{tab:!0,"is-active":i.key===t.activeKey},attrs:{title:i.text,role:"tab","aria-selected":i.key===t.activeKey},on:{click:function(e){return t.onTabClick(i)}}},[e("div",{staticClass:"text"},[t._v(t._s(i.text))])])})),0)}),[],!1,null,"6f2bcef9",null);e.a=v.exports},534:function(t,e,i){},535:function(t,e,i){},546:function(t,e,i){"use strict";var s=i(47),a=i(244);var r={props:["src","backgroundColor","alt","width","height","draggable"],data:()=>({success:!1,fail:!1}),computed:{actualSrc(){return this.success?this.src:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},loading(){return!this.success&&!this.fail},loadingStyle(){return{backgroundColor:this.backgroundColor,width:this.width+"px",height:this.height+"px"}}},watch:{src(){this.load()}},mounted(){this.load()},methods:{load(){this.success=!1,this.fail=!1;const t=new Image;t.onload=()=>{this.success=!0,this.$emit("load")},t.onerror=()=>{this.fail=!0,this.$emit("error")},t.src=this.src}}},o=(i(720),i(3)),n=Object(o.a)(r,(function(){var t=this._self._c;return t("div",[this.loading?t("div",{staticClass:"attachment-image",style:this.loadingStyle}):t("img",{staticClass:"attachment-image",attrs:{src:this.actualSrc,alt:this.alt,width:this.width,height:this.height,draggable:this.draggable}})])}),[],!1,null,"d91e5e8e",null).exports,l=(i(260),i(93)),c=i(55),d={components:{BaseIcon:l.a},props:["actionable","title","currentUrl","isDownloadable","previewImageColor","previewImageAspectRatio","previewImageLuminance","embedHtml","embedMetaHeight"],data:()=>({}),computed:{downloadUrl(){return Object(c.g)(this.currentUrl)}},methods:{backToPreview(){this.$emit("back")},zoom(){this.$emit("zoom")}}},h=Object(o.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"beethoven-inline-embed",style:{"background-color":t.previewImageColor}},[e("div",{staticClass:"beethoven-inline-embed-container",style:{"background-color":t.previewImageColor},attrs:{"data-aspect-ratio":t.previewImageAspectRatio},domProps:{innerHTML:t._s(t.embedHtml)}}),t._v(" "),e("div",{staticClass:"beethoven-inline-embed-actions",style:{"background-color":t.previewImageColor,height:t.embedMetaHeight+"px"},attrs:{"data-luminance":t.previewImageLuminance}},[e("div",{staticClass:"button-list"},[e("button",{staticClass:"icon-button",attrs:{title:t.__("Back to preview")},on:{click:t.backToPreview}},[e("base-icon",{attrs:{name:"arrow_back"}})],1)]),t._v(" "),t.actionable?t._e():e("div",{staticClass:"button-list"},[e("button",{staticClass:"icon-button",attrs:{title:t.__("Zoom")},on:{click:t.zoom}},[e("base-icon",{attrs:{name:"zoom_in"}})],1),t._v(" "),t.isDownloadable?e("a",{staticClass:"icon-button",attrs:{target:"_blank",download:t.title,href:t.downloadUrl,draggable:"false",title:t.__("Download")}},[e("base-icon",{attrs:{name:"download"}})],1):t._e(),t._v(" "),e("a",{staticClass:"icon-button",attrs:{href:t.currentUrl,target:"_blank",draggable:"false",title:t.__("Open in new window")}},[e("base-icon",{attrs:{name:"open_in_new"}})],1)])])])}),[],!1,null,null,null).exports,u=i(83),p=i(20),v=i(69);function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const f=window.devicePixelRatio;var _={components:{SurfaceAttachmentPreviewImage:n,SurfaceAttachmentPreviewEmbed:h,OzLoadingSpinner:u.a},props:{url:String,width:Number,height:Number,actionable:{type:Boolean,default:!1},autocolor:{type:Boolean,default:!0},showProvider:{type:Boolean,default:!0}},data:()=>({currentUrl:null,showPreview:!0,showEmbed:!1,isLoaded:!1,isTiny:!1,isFallback:!1,link:null,previewImageSrc:null,previewImageWidth:null,previewImageHeight:null,previewImageColor:null,previewImageAspectRatio:null,previewImageLuminance:null,showMeta:null,title:null,description:null,providerName:null,contentCategory:null,contentSubcategory:null,extension:null,embedCode:null,embedHtml:null,isDownloadable:null,embedMetaHeight:null}),computed:b(b(b({},Object(s.e)(["isApp","isPhone","canPostMessage"])),Object(s.c)(["useArvo"])),{},{metaStyle(){return this.autocolor?{"background-color":this.previewImageColor}:{"background-color":"transparent"}}}),watch:{isLoaded(t){t&&this.$emit("loaded")}},mounted(){this.setState()},beforeUpdate(){this.setState()},methods:b(b({},Object(s.b)("nativeApp",["openLink"])),{},{unload(){this.currentUrl=null,this.isLoaded=!1},backToPreview(){this.showPreview=!0,this.showEmbed=!1,this.$emit("back-to-preview")},async setState(){if(this.currentUrl===this.url)return;if(this.currentUrl!==this.url&&this.backToPreview(),this.currentUrl=this.url,!this.url)return;const t={dpr:f,locale:p.a,width:this.width,height:this.height,useArvo:this.useArvo},e=await Object(a.a)(this.url,t);this.link=e,this.isLoaded=!0,this.isTiny=e.is_tiny,this.isFallback=e.is_fallback,this.previewImageSrc=e.image_url,this.previewImageWidth=e.image_width,this.previewImageHeight=e.image_height,this.previewImageColor=e.image_color,this.previewImageAspectRatio=e.image_aspect_ratio,this.previewImageLuminance=e.image_luminance,this.showMeta=e.show_meta,this.title=e.title,this.description=e.description,this.providerName=e.provider_name,this.contentCategory=e.content_category,this.contentSubcategory=e.content_subcategory,this.extension=e.extension,this.embedCode=e.embed_code,this.isDownloadable=e.is_downloadable&&this.isMobile,"file"===this.contentCategory?this.downloadFileName=this.title:this.downloadFileName=!1},play(){if(!this.actionable)return!1;if(this.playInApp(),Object(v.a)(this.$el).parents(".noclick,.is-dragging").length>0)return!1;if("video"===this.contentCategory||"audio"===this.contentCategory)return this.embedMetaHeight=Object(v.a)(this.$refs.previewMeta).height(),this.embedInline(),!1;if(this.isPhone){if("photo"===this.contentCategory)return this.zoom(),!1}else if(this.embedCode&&"padlet"!==this.contentSubcategory)return this.zoom(),!1;return!0},playInApp(){let t="external";"padlet"===this.contentSubcategory?t="padlet":"photo"===this.contentCategory||"file"===this.contentCategory?t="internal_mediaplayer":"page"!==this.contentCategory&&"document"!==this.contentCategory||(t="internal_webview"),this.openLink({contentCategory:this.contentCategory,contentSubcategory:this.contentSubcategory,url:this.url,linkType:t})},addQueryParams:(t,e)=>t.match(/\?/)?[t,e].join("&"):[t,e].join("?"),embedInline(){this.showPreview=!1,this.showEmbed=!0,this.embedHtml=this.embedCode;const t=Object(v.a)(this.embedCode);if(t.is("iframe")){t.attr({width:this.previewImageWidth,height:this.previewImageHeight}).css("background",this.previewImageColor);const e=t.attr("src");let i=this.addQueryParams(e,"autoplay=1");"youtube"===this.providerName.toLowerCase()&&(i=this.addQueryParams(i,"rel=0")),t.attr("src",i),this.embedHtml=t[0].outerHTML}this.$emit("play")},zoom(){},expandPost(){this.backToPreview()}})},w=(i(721),Object(o.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"attachment-view"},[t.isLoaded&&t.showPreview?e("div",{key:"preview-image",staticClass:"attachment-preview",attrs:{href:t.currentUrl,target:"_blank",rel:"noopener nofollow ugc"}},[e("surface-attachment-preview-image",{staticClass:"attachment-preview-image",attrs:{draggable:"false",alt:t.title,src:t.previewImageSrc,width:t.previewImageWidth,height:t.previewImageHeight,"background-color":t.previewImageColor}}),t._v(" "),t.showMeta?e("div",{staticClass:"attachment-preview-meta"},[e("div",{staticClass:"attachment-preview-title ellipsified-type",attrs:{title:t.title}},[t._v(t._s(t.title))]),t._v(" "),t.description?e("div",{staticClass:"attachment-preview-description ellipsified-type",attrs:{title:t.description}},[t._v("\n        "+t._s(t.description)+"\n      ")]):t._e(),t._v(" "),t.showProvider&&t.providerName?e("div",{staticClass:"attachment-preview-provider"},[e("div",{staticClass:"attachment-preview-provider-name ellipsified-type"},[t._v(t._s(t.providerName))])]):t._e()]):t._e()],1):t.showEmbed?e("surface-attachment-preview-embed",{attrs:{actionable:t.actionable,"current-url":t.currentUrl,"is-downloadable":t.isDownloadable,title:t.title,"preview-image-color":t.previewImageColor,"preview-image-aspect-ratio":t.previewImageAspectRatio,"preview-image-luminance":t.previewImageLuminance,"embed-html":t.embedHtml,"embed-meta-height":t.embedMetaHeight},on:{back:t.backToPreview,zoom:t.zoom}}):e("div",{key:"spinner",staticClass:"attachment-loading"},[e("OzLoadingSpinner")],1)],1)}),[],!1,null,"702067ee",null));e.a=w.exports},719:function(t,e,i){"use strict";i(531)},720:function(t,e,i){"use strict";i(534)},721:function(t,e,i){"use strict";i(535)},83:function(t,e,i){"use strict";var s=i(0),a=function(t,e,i,s){var a,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(o=(r<3?a(o):r>3?a(e,i,o):a(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},r=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let o=class extends s.j{get style(){if(this.size)return{width:this.size+"px",height:this.size+"px"}}get strokeWidth(){return this.size&&this.size<30?4:2}};a([Object(s.h)({type:Number,default:48}),r("design:type",Number)],o.prototype,"size",void 0),a([Object(s.h)({type:String,default:"rainbow"}),r("design:type",String)],o.prototype,"color",void 0),a([Object(s.h)({default:"default"}),r("design:type",String)],o.prototype,"variation",void 0),a([Object(s.h)({default:"auto"}),r("design:type",Object)],o.prototype,"darkMode",void 0),o=a([Object(s.b)({})],o);var n=o,l=(i(216),i(3)),c=Object(l.a)(n,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{class:["loader","loader-"+t.variation,"color-"+t.color],style:t.style},["default"===t.variation?e("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[e("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none","stroke-width":t.strokeWidth,"stroke-miterlimit":"10"}})]):e("svg",{class:["fill-current",{"text-loading-spinner-dark dark:text-white-100":"auto"===t.darkMode,"text-white-100":!0===t.darkMode,"text-loading-spinner-dark":!1===t.darkMode}],attrs:{width:t.size+"px",height:t.size+"px",viewBox:"22 22 56 56",preserveAspectRatio:"xMidYMid"}},[e("g",{attrs:{transform:"rotate(0 50 50)"}},[e("rect",{attrs:{x:"47",y:"27",rx:"3",ry:"3.36",width:"6",height:"14"}},[e("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.875s",repeatCount:"indefinite"}})])]),t._v(" "),e("g",{attrs:{transform:"rotate(45 50 50)"}},[e("rect",{attrs:{x:"47",y:"27",rx:"3",ry:"3.36",width:"6",height:"14"}},[e("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"}})])]),t._v(" "),e("g",{attrs:{transform:"rotate(90 50 50)"}},[e("rect",{attrs:{x:"47",y:"27",rx:"3",ry:"3.36",width:"6",height:"14"}},[e("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.625s",repeatCount:"indefinite"}})])]),t._v(" "),e("g",{attrs:{transform:"rotate(135 50 50)"}},[e("rect",{attrs:{x:"47",y:"27",rx:"3",ry:"3.36",width:"6",height:"14"}},[e("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"}})])]),t._v(" "),e("g",{attrs:{transform:"rotate(180 50 50)"}},[e("rect",{attrs:{x:"47",y:"27",rx:"3",ry:"3.36",width:"6",height:"14"}},[e("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.375s",repeatCount:"indefinite"}})])]),t._v(" "),e("g",{attrs:{transform:"rotate(225 50 50)"}},[e("rect",{attrs:{x:"47",y:"27",rx:"3",ry:"3.36",width:"6",height:"14"}},[e("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"}})])]),t._v(" "),e("g",{attrs:{transform:"rotate(270 50 50)"}},[e("rect",{attrs:{x:"47",y:"27",rx:"3",ry:"3.36",width:"6",height:"14"}},[e("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.125s",repeatCount:"indefinite"}})])]),t._v(" "),e("g",{attrs:{transform:"rotate(315 50 50)"}},[e("rect",{attrs:{x:"47",y:"27",rx:"3",ry:"3.36",width:"6",height:"14"}},[e("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}})])])])])}),[],!1,null,"19067588",null);e.a=c.exports},981:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));const s=t=>{const e=(new DOMParser).parseFromString(t,"text/html").querySelector("iframe,img");return e?e.src:null},a=t=>{var e;return null!==(e=(new DOMParser).parseFromString(t,"text/html").body.textContent)&&void 0!==e?e:""}},983:function(t,e,i){"use strict";i.d(e,"e",(function(){return o})),i.d(e,"c",(function(){return d})),i.d(e,"a",(function(){return h})),i.d(e,"d",(function(){return v})),i.d(e,"b",(function(){return g})),i.d(e,"f",(function(){return b}));var s=i(1083),a=i.n(s),r=i(1);r.a.MediaRecorder&&r.a.MediaRecorder.prototype.pause||(r.a.MediaRecorder=a.a);const o="undefined"!==typeof MediaRecorder,n=["audio/webm","audio/ogg","audio/wav","audio/mp4"],l=['video/webm;codecs="vp9,opus"','video/webm;codecs="vp9,vorbis"','video/webm;codecs="vp8,opus"','video/webm;codecs="vp8,vorbis"','video/webm;codecs="h264"',"video/webm","video/mpeg","video/mp4"],c=o&&MediaRecorder.isTypeSupported?MediaRecorder.isTypeSupported.bind(MediaRecorder):()=>!1,d=(()=>{if(!o)return"";for(const t of l)if(c(t))return t;return""})(),h=(()=>{if(!o)return"";for(const t of n)if(c(t))return t;return""})(),[u]=d.split(";"),[,p]=u.split("/"),v=p,g=h.split("/").pop(),b=!!v},986:function(t,e,i){"use strict";var s=i(260),a=i(208),r=i(133),o=i(1087),n=i.n(o),l=i(983);const c={data:()=>({activeAudioDeviceId:null,activeVideoDeviceId:null,audioDevices:[],durationMs:0,maxDuration:60,bufferDuration:0,recordedChunks:[],recording:!1,recordingOptions:{},recordingStatus:"notstarted",recordingStartTimeMs:null,secondsElapsed:0,streaming:!1,videoDevices:[]}),computed:{constraints(){},hasChunks(){return"notstarted"!=this.recordingStatus},hasRecordedChunks(){return this.recordedChunks.length>0&&"notstarted"!=this.recordingStatus},hasReachedRecordingLimit(){return this.secondsElapsed>=this.maxDuration+this.bufferDuration},isReachingRecordingLimit(){},recordingButtonTitle(){return this.hasChunks?this.__("Resume recording"):this.__("Start recording")},recordingDurationText(){return Object(r.a)(this.secondsElapsed)}},watch:{hasReachedRecordingLimit(t){t&&this.pauseRecording()}},methods:{chooseAudioDevice(t){if(this.activeAudioDeviceId=t.target.value,"no_audio"!==t.target.value){const t=this.audioDevices.find(t=>t.id===this.activeAudioDeviceId).label;localStorage.setItem("activeAudioDeviceName",t)}this.streaming&&this.$nextTick(this.restartStreaming.bind(this))},chooseVideoDevice(t){this.activeVideoDeviceId=t.target.value;const e=this.videoDevices.find(t=>t.id===this.activeVideoDeviceId).label;localStorage.setItem("activeVideoDeviceName",e),this.$nextTick(this.restartStreaming.bind(this))},_gotRecordedData(t){this.recordingStatus="stopped",this.recordedChunks=this.recordedChunks.concat([t.data]),this.gotRecordedData()},gotRecordedData(){},gotDevices(t){const e=[],i=[];if(t)for(let o of t){let t=o.deviceId,s=o.label,a=o.kind;"videoinput"===a?e.push({id:t,label:s}):"audioinput"==a&&i.push({id:t,label:s})}this.videoDevices=e,this.audioDevices=i;let s=!1;const a=localStorage.getItem("activeVideoDeviceName")||null,r=localStorage.getItem("activeAudioDeviceName")||null;if(this.constraints.audio&&r){const t=i.find(t=>t.label===r);t&&(t.id===this.activeAudioDeviceId||(this.activeAudioDeviceId=t.id,s=!0))}if(this.constraints.video&&a){const t=e.find(t=>t.label===a);t&&(t.id===this.activeVideoDeviceId||(this.activeVideoDeviceId=t.id,s=!0))}s&&this.restartStreaming()},_gotStream(t){if(this.streaming=!0,this._stream=t,this.constraints.video){const e=t.getVideoTracks()[0];if(e.addEventListener("ended",()=>{this.stopRecording()}),e&&"function"==typeof e.getSettings){const t=e.getSettings();t.deviceId&&(this.activeVideoDeviceId=t.deviceId)}}if(this.constraints.audio){const e=t.getAudioTracks()[0];if(e&&"function"==typeof e.getSettings){const t=e.getSettings();t.deviceId&&(this.activeAudioDeviceId=t.deviceId)}}this.gotStream(t)},gotStream(t){},errorGettingStream(t){console.error(t)},mountRecording(t){"audio"==t?this.recordingOptions={mimeType:l.a}:this.isFirefox&&!this.constraints.audio?this.recordingOptions={mimeType:l.c.split(";")[0]}:this.recordingOptions={mimeType:l.c}},mountScreenStreaming(){if(this.isElectronApp){const t={audio:!1,video:this.constraints.video};navigator.mediaDevices.getUserMedia(t).then(t=>{if(!this.constraints.audio)return void this._gotStream(t);const e=Object(a.b)();e&&!this.audioDevices.length&&e.requestMic(),navigator.mediaDevices.getUserMedia({audio:this.constraints.audio}).then(e=>{t.addTrack(e.getAudioTracks()[0]),this._gotStream(t)})})}else if("chrome"===this.constraints.audio){let t={audio:!1,video:this.constraints.video};navigator.mediaDevices.getUserMedia(t).then(t=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{t.addTrack(e.getAudioTracks()[0]),this._gotStream(t)})})}else navigator.mediaDevices.getUserMedia(this.constraints).then(t=>{this._gotStream(t)}).catch(t=>{this.errorGettingStream(t)})},mountStreaming(){navigator.mediaDevices.getUserMedia(this.constraints).then(t=>(this._gotStream(t),navigator.mediaDevices.enumerateDevices())).then(this.gotDevices.bind(this))},mountToSetupAudioStreaming(){return navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{const e=t.getAudioTracks()[0];if("function"==typeof e.getSettings){const t=e.getSettings();t.deviceId&&(this.activeAudioDeviceId=t.deviceId)}return navigator.mediaDevices.enumerateDevices()}).catch(t=>{if("NotAllowedError"!==t.name)throw t;console.warn("Microphone permission not allowed")}).then(this.gotDevices.bind(this))},pauseRecording(){"recording"!=!this.recordingStatus&&(this._mediaRecorder.pause(),this.recordingStatus="paused",this.recording=!1,clearInterval(this._recordingTimer),this.durationMs+=Date.now()-this.recordingStartTimeMs)},async recordedBlob(){let t=new Blob(this.recordedChunks,{type:this.recordingOptions.mimeType});return this.recordingOptions.mimeType.startsWith("video/webm")&&(t=await n()(t,this.durationMs)),t},restartStreaming(){Object(s.a)("AV Recorder","Restarted"),this.stopStreaming(),this.startStreaming()},resumeRecording(){Object(s.a)("AV Recorder","Resumed"),this._mediaRecorder.resume(),this.recordingStatus="recording",this.recording=!0,this._recordingTimer=setInterval(()=>{this.secondsElapsed++},1e3),this.recordingStartTimeMs=Date.now()},discardRecording(){Object(s.a)("AV Recorder","Restarted"),this.secondsElapsed=0,this.recordedChunks=[],this._boundDataAvailableCallback&&this._mediaRecorder.removeEventListener("dataavailable",this._boundDataAvailableCallback),this.stopRecording(),this.durationMs=0},restartRecording(){this.discardRecording(),this.startRecording()},startRecording(){if(!this.hasReachedRecordingLimit&&"recording"!=this.recordingStatus){if("paused"==this.recordingStatus)return this.resumeRecording();"notstarted"==this.recordingStatus&&Object(s.a)("AV Recorder","Started"),this._mediaRecorder=new MediaRecorder(this._stream,this.recordingOptions),this._boundDataAvailableCallback||(this._boundDataAvailableCallback=this._gotRecordedData.bind(this)),this._mediaRecorder.addEventListener("dataavailable",this._boundDataAvailableCallback),this._mediaRecorder.start(),this.recording=!0,this.recordingStatus="recording",this._recordingTimer=setInterval(()=>{this.secondsElapsed++},1e3),this.recordingStartTimeMs=Date.now()}},startStreaming(){return navigator.mediaDevices.getUserMedia(this.constraints).then(this._gotStream.bind(this))},stopRecording(){this._mediaRecorder&&"stopped"!=this.recordingStatus&&"stopping"!=this.recordingStatus&&(this.recordingStatus="stopping",this.recording=!1,clearInterval(this._recordingTimer),0===this.durationMs&&(this.durationMs=Date.now()-this.recordingStartTimeMs),this.recordingStartTimeMs=null,this._mediaRecorder.stop())},stopStreaming(){this.streaming=!1,this._stream&&this._stream.getTracks().forEach(t=>t.stop())}}};e.a=c},987:function(t,e,i){"use strict";var s=i(78),a={components:{ProcessedImage:i(354).a},props:{provider:{type:String,required:!0}},computed:{href(){return s.c[this.provider].href},src(){return s.c[this.provider].src},width(){return s.c[this.provider].width},height(){return s.c[this.provider].height}}},r=(i(1012),i(3)),o=Object(r.a)(a,(function(){var t=this._self._c;return t("a",{attrs:{href:this.href,target:"_blank"}},[t("processed-image",{staticClass:"attribution-image",attrs:{src:this.src,width:this.width,height:this.height,transforms:{width:this.width,height:this.height}}})],1)}),[],!1,null,"25f0b4e6",null);e.a=o.exports},990:function(t,e,i){"use strict";var s=i(0),a=i(1036),r=function(t,e,i,s){var a,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(o=(r<3?a(o):r>3?a(e,i,o):a(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},o=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let n=class extends s.j{constructor(){super(...arguments),this.file=null,this.uploading=!1,this.maxFileUploadSize=0}close(){}handleFile(t){this.file=t,this.upload?this.uploading=!0:this.$emit("upload-file",this.file,this.maxFileUploadSize)}handleCaption(t){t&&this.$emit("caption",t)}onUploadCancel(){this.close(),this.uploading=!1}onUploadDone(t,e){this.$emit("select",e)}beforeDestroy(){this.uploading=!1}};r([Object(s.h)({default:!0}),o("design:type",Boolean)],n.prototype,"upload",void 0),n=r([Object(s.b)({components:{InterstitialUploader:a.a}})],n),e.a=n},992:function(t,e,i){},995:function(t,e,i){}}]);
//# sourceMappingURL=27-2cb021b5c1b375bb2fe2.chunk.js.map